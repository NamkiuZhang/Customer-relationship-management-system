<%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%
	String path = request.getContextPath();
	String basePath = request.getScheme() + "://"
			+ request.getServerName() + ":" + request.getServerPort()
			+ path + "/";
%>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>

		<title>My JSP 'top.jsp' starting page</title>

		<meta http-equiv="pragma" content="no-cache">
		<meta http-equiv="cache-control" content="no-cache">
		<meta http-equiv="expires" content="0">
		<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
		<meta http-equiv="description" content="This is my page">

		<link rel="stylesheet" href="css/footerstyle.css">
		<link rel="stylesheet" href="reset.css" />
		<!--
	<link rel="stylesheet" type="text/css" href="styles.css">
	-->
		<style type="text/css">
.active {
	background: #eee;
}

<<<<<<< .mine
.code {
	padding: 10px 0;
}

.code h3 span {
	border: 1px solid #ddd;
	margin-left: -1px;
	padding: 10px;
	display: inline-block;
	cursor: pointer;
}

pre {
	background: #eee;
	padding: 10px;
}

.sliderbox {
	position: relative;
}  /*必须加这句css,否则向左右，上下滚动时会没有效果*/
.noticecontent {
	margin: 20px auto;
	width: 300px;
}

.text {
	height: 150px;
	width: 500px;
	overflow: hidden;
	position: relative;
	margin: 0px auto;
}

.text li {
	line-height: 30px;
	height: 30px;
	width: 500px;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}
</style>

	</head>

	<body
		style="width: 1025px; float: right; background: url('images/aaaa.png'); background-size: cover">


		<div class="notice" style="position: absolute; left: 150px;">
			<div class="text" id="text-slideTo">
				<ul class="sliderbox">
					<li>
						测试文字1滚动Lorem ipsum dolor sit1.asdfasdfasdfasdfadf
					</li>
					<li>
						测试文字2滚动Lorem ipsum dolor sit2.adsfasdfadsfadsf
					</li>
					<li>
						测试文字3滚动Lorem ipsum dolor sit3afdsfasdfasdfadsfasdf
					</li>

					<li>
						测试文字4滚动Lorem ipsum dolor sit4.asdfasdfasdfadsf
					</li>
					<li>
						测试文字5滚动Lorem ipsum dolor sit5.adsafdsf
					</li>
					<li>
						测试文字6滚动Lorem ipsum dolor sit1.
					</li>
					<li>
						测试文字7滚动Lorem ipsum dolor sit4.asdfasdfasdfadsf
					</li>
					<li>
						测试文字8滚动Lorem ipsum dolor sit5.adsafdsf
					</li>
					<li>
						测试文字9滚动Lorem ipsum dolor sit1.
					</li>



=======
  </head>
  
  <body style="width:1025px;float:right;background: url('images/aaaa.png');background-size:cover">
   
		
			<div class="notice" style="position:absolute;left:150px;padding-top:25px">
			     <div class="text" id="text-slideTo">
				    <ul class="sliderbox">
					<li>测试文字1滚动Lorem ipsum dolor sit1.asdfasdfasdfasdfadf</li>
					<li>测试文字2滚动Lorem ipsum dolor sit2.adsfasdfadsfadsf</li>
					<li>测试文字3滚动Lorem ipsum dolor sit3afdsfasdfasdfadsfasdf</li>
								
					<li>测试文字4滚动Lorem ipsum dolor sit4.asdfasdfasdfadsf</li>
					<li>测试文字5滚动Lorem ipsum dolor sit5.adsafdsf</li>
					<li>测试文字6滚动Lorem ipsum dolor sit1.</li>
					<li>测试文字7滚动Lorem ipsum dolor sit4.asdfasdfasdfadsf</li>
					<li>测试文字8滚动Lorem ipsum dolor sit5.adsafdsf</li>
					<li>测试文字9滚动Lorem ipsum dolor sit1.</li>
				
				
					
>>>>>>> .r523
				</ul>
			</div>
		</div>

		<div class=""
			style="position: absolute; right: 60px; top: 15px; width: 100px;">
<div id="singal" style="display:none;position: absolute; border :1px solid #000;padding : 3px;opacity : 0.7;top:90px;right:3px;background-color: red;color : #fff"> </div>
			<h3 id="welcome"></h3>
			<br />
			<a class="button" href="Person_logout.action">退出登录</a>
			
			<c:if
				test="${sessionScope.roleid=='1'||sessionScope.roleid=='3'||sessionScope.roleid=='5'}">
				<a href="planwork.jsp" target="bottom" id="work">我的任务</a>
			</c:if>
			<c:if
				test="${sessionScope.roleid=='2'||sessionScope.roleid=='4'||sessionScope.roleid=='6'}">

				<a href="steptask.jsp" target="bottom" id="work"
					>我的任务</a>
			</c:if>	
		
<<<<<<< .mine
=======
		<div class="" style="position:absolute;right:60px;top:15px;">
				<img  style="width:50px;height:50px"  id="icon"></img>
				<h3 id="welcome" style="padding-top:10px"></h3><br/>
				<c:if test="${sessionScope.roleid=='1'||sessionScope.roleid=='3'||sessionScope.roleid=='5'}"> 
				
				<a class="bmedium" href="person_logout.action" target="_top" style="display:block">退出</a>
			</div>
		
		
			<div class="" style="position:absolute;left:700px;top:15px;width:150px;">
				
				
				
				<a href="planwork.jsp" target="bottom" id="plan" >我的任务</a>
				 </c:if>
            	<c:if test="${sessionScope.roleid=='2'||sessionScope.roleid=='4'||sessionScope.roleid=='6'}">   
				
				<a href="steptask.jsp" target="bottom" id="step" style="display:none">我的任务</a>
				</c:if>
				<br/>
				
			</div>
>>>>>>> .r523
			
<<<<<<< .mine
		</div>
		<div class="" style="position: absolute; left: 650px; top: 15px;">
			<img style="width: 100px; height: 100px" src="images/forewhite1s.png"
				id="icon"></img>
		</div>

		<script type="text/javascript" src="images/jquery-1.9.1.min.js">
</script>
		<script type="text/javascript" src="power-slider.js">
</script>
		<script type="text/javascript">
var roleid = '<%=request.getSession().getAttribute("roleid")%>';
var username = '<%=request.getSession().getAttribute("user")%>';
var msize;
var moldsize;
var psize;
var poldsize;
$(function(){  
=======
			
     <script type="text/javascript" src="images/jquery-1.9.1.min.js"></script>
	<script type="text/javascript" src="power-slider.js"></script>
    <script type="text/javascript">
    var roleid='<%=request.getSession().getAttribute("roleid")%>';
    var username='<%=request.getSession().getAttribute("user")%>';
    $(function(){  
>>>>>>> .r523
        $("#text").powerSlider({delayTime:1000,sliderNum:5});
        //$("#text-left").powerSlider({handle:"left",delayTime:2000,sliderNum:5});
        
        $("#text-slideTo").powerSlider({handle:"slideTo",delayTime:2000,sliderNum:3});
        //$("#text").powerSlider();
        //$("#img").powerSlider({picNum:4,handle:"hide"});
        $(".code h3 span").each(function(i){
        	$(this).click(function(){
        		$(this).addClass("active").siblings().removeClass("active");
        		$(".code pre").eq(i).show().siblings("pre").hide();
        	})
        })
     
	$("#welcome").html(username);
	
	if(roleid==1||roleid==2){
	
		$("#icon").attr("src","images/icon/tuiguang.png");
	}else if(roleid==3||roleid==4){
		$("#icon").attr("src","images/icon/sale.png");
	}else if(roleid==5||roleid==6){
		$("#icon").attr("src","images/icon/service.png");
	}else if(roleid==8){
		$("#icon").attr("src","images/icon/admin.png");
	}
	 if(roleid==1||roleid==3||roleid==5){
	 respondmana();
	    setInterval("respondmana()",10000);
	 }
	if(roleid==2||roleid==4||roleid==6){
	respondperson();
	   setInterval("respondperson()",10000);
	}
	 
    });
    function respondmana(){ 
	
		var data="personname="+roleid;
	$.ajax( {

		type : "POST",
		url : "work_findTaskList.action",
		dataType : "json",
		data:data,
		success : function(data) {
    		moldsize= data.moldlength;
			msize=data.mlength;
			showupdate();
			}
	}); 
	}
	
 function respondperson(){	
		
		
	var data="personname="+username;
	alert(username);
	$.ajax( {
		type : "POST",
		url : "work_findTaskList.action",
		dataType : "json",
		data:data,
		success : function(data) {
          psize=data.plength;
			poldsize= data.poldlength;
			 showupdate();
		
			}
	}); 
	} 

    function showupdate(){
    	if(poldsize<psize){
			var com=document.getElementById("singal");
			com.innerText=psize-poldsize;
	     com.style.display   =   "block"; 
			  
			}
				if(moldsize<msize){
				var com=document.getElementById("singal");
				com.innerText=msize-moldsize;
	     com.style.display   =   "block"; 
			  
			}
    
    }

    
</script>
	</body>
</html>




